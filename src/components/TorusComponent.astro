---
// 这里不需要服务端代码
---

<!-- 3D场景容器 -->
<div id="torus-container" style="width: 100%; height: 100vh;"></div>

<script>
  // 客户端挂载时初始化Three.js场景
  const initScene = async () => {
    // 动态导入Three.js以减少初始包大小
    const THREE = await import('three');
    
    // 创建场景
    const scene = new THREE.Scene();
    
    // 创建相机
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 5;
    
    // 创建渲染器
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x1a1a1a); // 设置背景色为深灰色
    
    // 将渲染器添加到页面
    document.getElementById('torus-container').appendChild(renderer.domElement);
    
    // 创建圆环几何体
    const geometry = new THREE.TorusGeometry(1, 0.4, 16, 100);
    
    // 创建材质
    const material = new THREE.MeshNormalMaterial(); // 使用法向量材质以获得彩色效果
    
    // 创建网格
    const torus = new THREE.Mesh(geometry, material);
    scene.add(torus);
    
    // 动画函数
    const animate = () => {
      requestAnimationFrame(animate);
      
      // 使圆环沿Y轴缓慢旋转
      torus.rotation.y += 0.01;
      
      // 渲染场景
      renderer.render(scene, camera);
    };
    
    // 启动动画
    animate();
    
    // 处理窗口大小调整
    const handleResize = () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    };
    
    window.addEventListener('resize', handleResize);
    
    // 组件卸载时清理事件监听器
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  };
  
  // 组件加载时初始化场景
  initScene();
</script>